{
  "port": 3000,
  "db": {
    "name": "tamanu-sync",
    "verbose": false,
    "username": "",
    "password": "",
    "migrateOnStartup": false
  },
  "log": {
    "path": "",
    "consoleLevel": "info"
  },
  "sync": {
    "concurrentChannelChecks": 8
  },
  "loadshedder": {
    // paths are checked sequentially until a path matches a prefix
    // (e.g. the path `/v1/sync/patient` would match the prefix `/v1/sync/`)
    //
    // if the path of a request matches a prefix it is added to that queue and
    // may be dropped under heavy load
    //
    // if the path of a request matches nothing, the server never drops the
    // request
    "queues": [
      // sync queue
      // (defaults to shedding requests for sync or attachments earlier than other requests)
      {
        "name": "low_priority",
        "prefixes": ["/v1/sync", "/v1/attachment"],
        "maxActiveRequests": 4,
        "maxQueuedRequests": 8,
        "queueTimeout": 500
      },
      // global queue for non-sync non-attachment requests
      // (defaults to queueing more requests than sync/attachments and them shedding much later)
      {
        "name": "high_priority",
        "prefixes": ["/"],
        "maxActiveRequests": 8,
        "maxQueuedRequests": 32,
        "queueTimeout": 2000
      }
    ]
  },
  "auth": {
    "saltRounds": 12,
    "tokenDuration": "1h",
    "reportNoUserError": false,
    "allowDummyToken": false,
    "initialUser": {
      "email": "admin@tamanu.io",
      "displayName": "Initial Admin",
      "role": "admin",
      "password": "admin"
    },
    "resetPassword": {
      "tokenLength": 6,
      "tokenExpiry": 20
    }
  },
  "mailgun": {
    "domain": "",
    "apiKey": "",
    "from": ""
  },
  "cors": {
    "allowedOrigin": ""
  },
  "schedules": {
    "outpatientDischarger": {
      // every day at 11 PM
      "schedule": "0 11 * * *",
      "batchSize": 1000,
      "batchSleepAsyncDurationInMilliseconds": 50
    },
    "reportRequestProcessor": {
       // every 30 seconds
      "schedule": "*/30 * * * * *"
    } 
  },
  "integrations": {
    "fiji": {
      "vrs": {
        "enabled": false,
        "host": "http://uat-vra.digitalfiji.gov.fj:8786",
        "expectAccessToken": "set this value in local.json",
        // refresh the token if it's within tokenExpiryMarginMs milliseconds of expiry
        "tokenExpiryMarginMs": 60000
      }
    }
  },
  "localisation": {
    "labResultWidget": {
      "categoryWhitelist": [
        "labTestCategory-COVID"
      ],
      "testTypeWhitelist": [
        "labTestType-COVID"
      ]
    },
    "data": {
      "fields": {
        "markedForSync": {
          "shortLabel": "Sync",
          "longLabel": "Marked for sync"
        },
        "displayId": {
          "shortLabel": "NHN",
          "longLabel": "National Health Number"
        },
        "firstName": {
          "shortLabel": "First name",
          "longLabel": "First name"
        },
        "middleName": {
          "shortLabel": "Middle name",
          "longLabel": "Middle name",
          "hidden": false
        },
        "lastName": {
          "shortLabel": "Last name",
          "longLabel": "Last name"
        },
        "culturalName": {
          "shortLabel": "Cultural name",
          "longLabel": "Cultural/traditional name",
          "hidden": false
        },
        "sex": {
          "shortLabel": "Sex",
          "longLabel": "Sex",
          "hidden": false
        },
        "dateOfBirth": {
          "shortLabel": "DOB",
          "longLabel": "Date of birth"
        },
        "dateOfBirthFrom": {
          "shortLabel": "DOB from",
          "longLabel": "Date of birth from"
        },
        "dateOfBirthTo": {
          "shortLabel": "DOB to",
          "longLabel": "Date of birth to"
        },
        "dateOfBirthExact": {
          "shortLabel": "DOB exact",
          "longLabel": "Date of birth exact"
        },
        "bloodType": {
          "shortLabel": "Blood type",
          "longLabel": "Blood type",
          "hidden": false
        },
        "title": {
          "shortLabel": "Title",
          "longLabel": "Title",
          "hidden": false
        },
        "placeOfBirth": {
          "shortLabel": "Place of birth",
          "longLabel": "Place of birth",
          "hidden": false
        },
        "countryOfBirthId": {
          "shortLabel": "Country of birth",
          "longLabel": "Country of birth",
          "hidden": false
        },
        "maritalStatus": {
          "shortLabel": "Marital status",
          "longLabel": "Marital status",
          "hidden": false
        },
        "primaryContactNumber": {
          "shortLabel": "Primary contact number",
          "longLabel": "Primary contact number",
          "hidden": false
        },
        "secondaryContactNumber": {
          "shortLabel": "Secondary contact number",
          "longLabel": "Secondary contact number",
          "hidden": false
        },
        "socialMedia": {
          "shortLabel": "Social media",
          "longLabel": "Social media",
          "hidden": false
        },
        "settlementId": {
          "shortLabel": "Settlement",
          "longLabel": "Settlement",
          "hidden": false
        },
        "streetVillage": {
          "shortLabel": "Residential landmark",
          "longLabel": "Residential landmark",
          "hidden": false
        },
        "cityTown": {
          "shortLabel": "City/town",
          "longLabel": "City/town",
          "hidden": false
        },
        "subdivisionId": {
          "shortLabel": "Sub division",
          "longLabel": "Sub division",
          "hidden": false
        },
        "divisionId": {
          "shortLabel": "Division",
          "longLabel": "Division",
          "hidden": false
        },
        "countryId": {
          "shortLabel": "Country",
          "longLabel": "Country",
          "hidden": false
        },
        "medicalAreaId": {
          "shortLabel": "Medical area",
          "longLabel": "Medical area",
          "hidden": false
        },
        "nursingZoneId": {
          "shortLabel": "Nursing zone",
          "longLabel": "Nursing zone",
          "hidden": false
        },
        "nationalityId": {
          "shortLabel": "Nationality",
          "longLabel": "Nationality",
          "hidden": false
        },
        "ethnicityId": {
          "shortLabel": "Ethnicity",
          "longLabel": "Ethnicity",
          "hidden": false
        },
        "occupationId": {
          "shortLabel": "Occupation",
          "longLabel": "Occupation",
          "hidden": false
        },
        "educationalLevel": {
          "shortLabel": "Educational attainment",
          "longLabel": "Educational attainment",
          "hidden": false
        },
        "villageName": {
          "shortLabel": "Village",
          "longLabel": "Village",
          "hidden": false
        },
        "villageId": {
          "shortLabel": "Village",
          "longLabel": "Village",
          "hidden": false
        },
        "birthCertificate": {
          "shortLabel": "Birth certificate",
          "longLabel": "Birth certificate number",
          "hidden": false
        },
        "drivingLicense": {
          "shortLabel": "Driving license",
          "longLabel": "Driving license number",
          "hidden": false
        },
        "passport": {
          "shortLabel": "Passport",
          "longLabel": "Passport number",
          "hidden": false
        },
        "religionId": {
          "shortLabel": "Religion",
          "longLabel": "Religion",
          "hidden": false
        },
        "patientBillingTypeId": {
          "shortLabel": "Type",
          "longLabel": "Patient type",
          "hidden": false
        },
        "ageRange": {
          "shortLabel": "Age range",
          "longLabel": "Age range"
        },
        "age": {
          "shortLabel": "Age",
          "longLabel": "Age"
        }
      },
      "features": {
        "registerNewPatient": true,
        "hideOtherSex": true
      },
      "templates": {
        "letterhead": {
          "title": "TAMANU MINISTRY OF HEALTH & MEDICAL SERVICES",
          "subTitle": "PO Box 12345, Melbourne, Australia"
        },
        "vaccineCertificateFooter": {
          "emailAddress": "tamanu@health.gov",
          "contactNumber": 12345
        }
      },
      "sync": {
        "syncAllEncountersForTheseScheduledVaccines": []
      },
      "disabledReports": []
    }
  },
  "reports": {
    // Configure this COVID report with custom properties needed for mapping entities, and the surveyId to sync with tupaia.
    // Note: it only syncs if configured to in the scheduled reports config.
    "covid-vaccine-daily-summary-village": {
      "countryCode": "WS",
      "hierarchyName": "covid_samoa",
      "surveyId": "605b114261f76a3684009d5a"
    }
  },
  "reportProcess" : {
    // Report process timeout in 2 hours.
    "timeOutDurationSeconds": 7200,
    "runInChildProcess": true,
    // provide an array [] if you want to override the options, eg: ['--max-old-space-size=4096']
    "processOptions": null,
    // Provide an object {} for the env of child process
    "childProcessEnv": null
  },
  "tupaiaApiClient": {},
  "scheduledReports": []
}
