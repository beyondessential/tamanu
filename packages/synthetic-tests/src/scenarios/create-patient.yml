config:
  target: http://localhost:4000
  processor: '../hooks/authenticate.ts'
  phases:
    - duration: 60
      arrivalRate: 1
    - duration: 300
      arrivalRate: 10

scenarios:
  - name: Create patient
    beforeScenario:
      - authenticate
    flow:
      - function: generatePatientPayload
      - post:
          url: '/api/patient'
          headers:
            Authorization: 'Bearer {{token}}'
            'Content-Type': 'application/json'
          json: '{{patientPayload}}'
          expect:
            - statusCode: [200, 201]
