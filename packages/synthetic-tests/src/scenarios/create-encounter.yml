config:
  target: http://localhost:4000
  processor: '../hooks/index.ts'
  phases:
    - duration: 60
      arrivalRate: 10
    - duration: 300
      arrivalRate: 50

scenarios:
  - name: Create encounter
    beforeScenario:
      - authenticate
    flow:
      - function: generateEncounterPayload
      - post:
          url: '/api/encounter'
          headers:
            Authorization: 'Bearer {{token}}'
            'Content-Type': 'application/json'
          json: '{{encounterPayload}}'
          expect:
            - statusCode: [200, 201]
