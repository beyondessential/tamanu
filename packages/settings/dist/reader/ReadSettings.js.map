{"version":3,"sources":["../../src/reader/ReadSettings.ts"],"sourcesContent":["import { get as lodashGet } from 'lodash';\nimport { buildSettings } from './buildSettings';\nimport { settingsCache } from '../cache';\nimport { Models } from './readers/SettingsDBReader';\nexport class ReadSettings {\n  models: Models;\n  facilityId?: string;\n  constructor(models: Models, facilityId?: string) {\n    this.models = models;\n    this.facilityId = facilityId;\n  }\n\n  async get(key: string) {\n    let settings = settingsCache.get();\n    if (!settings) {\n      settings = await buildSettings(this.models, this.facilityId);\n      settingsCache.set(settings);\n    }\n\n    return lodashGet(settings, key);\n  }\n}\n"],"names":["ReadSettings","get","key","settings","settingsCache","buildSettings","models","facilityId","set","lodashGet","constructor"],"mappings":";;;;+BAIaA;;aAAAA;;wBAJoB;+BACH;uBACA;AAEvB,IAAA,AAAMA,eAAN,MAAMA;IAQX,MAAMC,IAAIC,GAAW,EAAE;QACrB,IAAIC,WAAWC,oBAAa,CAACH,GAAG;QAChC,IAAI,CAACE,UAAU;YACbA,WAAW,MAAME,IAAAA,4BAAa,EAAC,IAAI,CAACC,MAAM,EAAE,IAAI,CAACC,UAAU;YAC3DH,oBAAa,CAACI,GAAG,CAACL;QACpB,CAAC;QAED,OAAOM,IAAAA,WAAS,EAACN,UAAUD;IAC7B;IAbAQ,YAAYJ,MAAc,EAAEC,UAAmB,CAAE;QAC/C,IAAI,CAACD,MAAM,GAAGA;QACd,IAAI,CAACC,UAAU,GAAGA;IACpB;AAWF"}