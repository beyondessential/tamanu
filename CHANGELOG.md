# CHANGELOG

## vNEXT

### Manual steps required after upgrade ⚙

- Add to samoa `packages/sync-server/local.json`:

```
"tupaiaApiClient": {
    "auth": {
        "username": "tamanu-server@tupaia.org",
        "password": "" // find in lastpass, search for tamanu-server@tupaia.org
    },
    "environment": "production"
},
```

### Features ⭐

- (left blank)

### Tweaks ⚖️

- (left blank)

### Bug fixes 🐛

- Fix OutpatientDischarger performance and schedule not working.

### Infrastructure and maintenance 🛠

- (left blank)

## v1.8.0

### Manual steps required after upgrade ⚙

- (left blank)

### Features ⭐

- (left blank)

### Tweaks ⚖️

- (left blank)

### Bug fixes 🐛

- (left blank)

### Infrastructure and maintenance 🛠

- (left blank)

## v1.8.4

### Bug fixes 🐛

- Fix bug where loadshedder might fail to release lock

## v1.8.3

### Bug fixes 🐛

- Prevent sequelize nesting encounter queries on export

## v1.8.2

### Tweaks ⚖️

- Added loadshedder middleware to keep system more operational under load

## v1.8.1

### Bug fixes 🐛

- Disabled potentially unstable outpatient discharger task

## v1.8.0

### Manual steps required after upgrade ⚙

- (left blank)

### Features ⭐

- Add registered patients line-list report
- Add India assistive technology device line list report
- Add Iraq assistive technology device line list report
- Add PNG assistive technology device line list report
- Add Generic Vaccine line list report
- Allow disabling reports through server config

### Tweaks ⚖️

- Renamed SyncMetadata to ChannelSyncPullCursor
- Facility server now throws an error when connecting to a sync server if it had previously connected to a different one
- Reports generated by sync server are zipped before sending out via email
- Limit /sync/channels concurrency to 8 (by default) concurrent queries to reduce connection pool contention

### Bug fixes 🐛

- Changed Country to Country of birth and only allow ALL FACILITIES in registered patients line-list report

### Infrastructure and maintenance 🛠

- Removed Tonga from meta-server
- Made ./scripts/version.sh safer
